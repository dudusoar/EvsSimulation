# 项目更新日志 (Changelog)

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.1.0] - 2025-05-24 📚

### 新增
- **🤖 AI助手核心指南**: 
  - 创建 `docs/AI_GUIDE.md` - 集成项目概况、模块详解、使用方法
  - 专为AI助手和用户友好设计的一站式指南
  - 包含完整的模块功能说明和开发规范

### 重大优化  
- **📚 文档系统大幅精简**:
  - 删除空文件夹: `code_docs/`, `logs/development/` 等
  - 删除重复文档: `index.md`, `structure.md`  
  - 删除冗余索引: `version_index.md` 文件
  - 精简 `quick_reference.md` - 只保留核心配置和命令

- **🎯 文档导航优化**:
  - 重写 `README.md` - 清晰的4级文档结构
  - 突出 `AI_GUIDE.md` 作为核心入口
  - 简化文档分类和导航逻辑

### 文档结构优化
- **核心文档层次**:
  ```
  docs/
  ├── AI_GUIDE.md              🔥 一站式核心指南
  ├── README.md                📚 清晰导航
  ├── specs/
  │   ├── quick_reference.md   ⚡ 配置命令速查
  │   └── code_conventions.md  📝 编码规范
  ├── project_docs/v1,v2/      📖 设计文档
  ├── logs/updates/changelog.md 📊 变更历史
  └── templates,procedures/     🛠️ 开发工具
  ```

### 用户体验提升
- **AI助手友好**:
  - 项目概况、架构关系一目了然
  - 模块功能详解，易于维持代码记忆
  - 故障排查和开发规范集中管理

- **用户友好**:
  - 快速开始指南 (3步上手)
  - 模块功能清晰说明 (6大核心模块)
  - 命令和配置速查表

### 设计理念
- **简化优先**: 删除80%冗余内容，保留20%核心价值
- **一站式服务**: AI_GUIDE.md 包含90%常用信息
- **双重友好**: 既满足AI代码记忆需求，又便于用户快速理解

## [2.0.0] - 2025-05-24 🚀

### 新增
- **🚀 超高性能仿真配置**:
  - 车速从50km/h提升至200km/h
  - 订单生成率从5提升至1000订单/小时
  - 电量消耗率从0.2提升至0.8%/km（快速看到充电效果）
  - 充电阈值从20%提升至30%（更容易触发充电）
  - 充电速率从1.0提升至2.0%/秒（快速充电）

- **⚡ 订单系统重大优化**:
  - 新增预生成初始订单功能（启动即有10个订单）
  - 实现超高频订单生成（每3.6秒一个新订单）
  - 完整的订单生命周期：生成→分配→接客→完成
  - 智能订单分配算法（基于距离和电量）

- **🎨 可视化用户体验大幅提升**:
  - 全面英文化界面（解决中文字体显示问题）
  - 订单同时显示起点和终点（带编号标识）
  - 调小所有标识尺寸，与地图更协调
  - 车辆状态简洁显示（P=载客，C=充电）
  - 实时统计面板完全英文化

- **📁 路径系统标准化**:
  - 地图文件从`graphml_files/`迁移至`datasets/maps/`
  - 修复代码中的路径引用
  - 清理旧的目录结构

### 修改
- **性能显著提升**:
  - 90秒内可实现100%车辆利用率
  - 90秒内总收入可达¥50+
  - 订单完成率提升至30%+
  - 车队平均行驶距离提升至4-5公里

- **可视化帧数优化**:
  - 相同时长动画帧数减少33%
  - 生成速度提升至17+it/s
  - 更快的渲染和保存速度

- **用户体验改进**:
  - 快速演示：30-90秒看完整业务流程
  - 立即可见效果：0秒延迟的初始订单
  - 英文界面：解决字体兼容性问题

### 技术改进
- **代码优化**:
  - 订单系统新增`_generate_initial_orders()`方法
  - 可视化模块全面重构标识系统
  - 配置参数大幅优化调整
  - 路径引用标准化修复

- **文档更新**:
  - 快速参考手册更新至v2.0.0
  - 新增高性能配置说明
  - 更新命令行参数文档
  - 性能指标全面更新

### 测试验证
- **功能验证**:
  - ✅ 预生成10个初始订单正常工作
  - ✅ 1000订单/小时高频生成稳定
  - ✅ 200km/h车速正常移动
  - ✅ 英文界面完全正常显示
  - ✅ 路径引用修复无错误

- **性能测试**:
  - ✅ 20车100%利用率达成
  - ✅ 90秒内¥53+收入验证
  - ✅ 33个订单高频生成验证
  - ✅ 可视化流畅度正常

### 设计理念
- **快速演示优先**: 30-90秒内展示完整仿真流程
- **高频交互**: 大量订单和车辆活动，模拟繁忙都市
- **用户友好**: 英文界面解决兼容性，小标识协调美观
- **即时效果**: 启动就有订单，无需等待

## [1.2.0] - 2025-05-24

### 新增
- **🗂️ 系统化数据组织结构**:
  - `datasets/` - 输入数据统一管理
    - `datasets/maps/` - 地图数据 (移动自graphml_files/)
    - `datasets/external/` - 外部下载数据
    - `datasets/processed/` - 预处理数据
  - `outputs/` - 输出结果分类存储
    - `outputs/simulation_results/` - 仿真原始结果
    - `outputs/analysis/` - 分析处理结果
    - `outputs/visualizations/` - 图表和动画
    - `outputs/exports/` - 导出报告和数据
- **📋 完整数据管理文档**:
  - 输入数据组织说明 (`datasets/README.md`)
  - 输出结果管理指南 (`outputs/README.md`)
  - 数据命名规范和版本管理策略
- **🔄 数据流向图**: 清晰展示数据在系统中的流动路径

### 修改
- **目录重组**: 移动 `graphml_files/west_lafayette_in.graphml` → `datasets/maps/`
- **文档更新**: 
  - 快速参考手册增加数据管理速查
  - 项目结构说明完善数据组织部分
  - 包含Git管理建议和.gitignore设置

### 已删除
- `graphml_files/` 文件夹 (内容已移动到 `datasets/maps/`)

### 设计理念
- **分离关注点**: 输入数据vs输出结果明确分离
- **标准化管理**: 统一的命名规范和版本控制
- **可扩展性**: 支持多种数据格式和未来扩展需求

## [1.1.0] - 2025-05-24

### 新增
- **AI助手专用文档**:
  - 快速参考手册 (`docs/specs/quick_reference.md`) - 核心信息速查
  - 代码规范指南 (`docs/specs/code_conventions.md`) - 保持代码一致性
- **文档系统优化**:
  - 简化文档更新流程 (专为AI设计)
  - 优化README文档导航
  - 新增AI助手使用指南

### 修改
- **流程文档简化**: 精简`doc_update_process.md`，去除冗余细节
- **文档结构优化**: 重新组织文档导航，突出AI助手常用文档
- **内容聚合**: 在快速参考手册中集中关键信息

### 设计理念
- 专为AI助手优化文档结构
- 突出实用性，减少冗余信息
- 快速查找关键开发信息

## [1.0.0] - 2025-05-24

### 新增
- **文档管理系统**: 建立完整的文档版本管理架构
  - 项目文档版本化 (`docs/project_docs/`)
  - 代码说明文档系统 (`docs/code_docs/`)
  - 日志管理系统 (`docs/logs/`)
  - 流程规范文档 (`docs/procedures/`)
- **目录结构重组**: 
  - 移动 `requirement_document/` → `docs/project_docs/v1/`
  - 移动 `simulation.log` → `docs/logs/simulation/`
  - 移动 `structure.txt` → `docs/specs/`
- **版本管理**:
  - 项目文档版本索引
  - 代码文档版本索引
  - 版本对应关系表

### 修改
- 重新组织项目文档结构
- 标准化文档命名规范
- 建立文档更新流程

### 已删除
- 旧的 `requirement_document/` 文件夹

## [0.1.0] - 2025-05-24之前

### 现有功能 (重构前)
- **核心仿真系统**:
  - 电车司机行为仿真 (`main.py`)
  - 地图加载和路径规划 (`core/`, `utils/`)
  - 车辆管理系统 (`models/`)
  - 可视化动画 (`visualization/`)
- **数据管理**:
  - 配置文件管理 (`config/`)
  - 仿真数据处理 (`data/`)
- **技术栈**:
  - Python 3.11+
  - 依赖管理通过 `requirements.txt`
  - 基于 OSM 的地图数据
  - matplotlib 可视化

---

## 变更记录规范

### 变更类型
- **新增** - 新功能
- **修改** - 现有功能的变更
- **已删除** - 现在已删除的功能
- **已弃用** - 很快会删除的功能
- **已修复** - 任何错误修复
- **安全** - 安全问题修复

### 记录格式
```markdown
### 变更类型
- **功能名称**: 简要描述
  - 详细说明1
  - 详细说明2
  - 相关文件或模块
```

### 更新频率
- 每个重要功能完成后更新
- 每个版本发布前整理
- 每月至少检查一次
- 重大架构变更立即记录

## 相关文档
- [版本控制规范](../procedures/version_control.md)
- [文档更新流程](../procedures/doc_update_process.md)
- [项目文档索引](../project_docs/version_index.md)
- [数据管理说明](../../datasets/README.md)
- [输出结果说明](../../outputs/README.md) 