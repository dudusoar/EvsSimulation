# Folium åœ°å›¾ä»¿çœŸåŠ¨ç”»æŠ€æœ¯æŒ‡å—

## æ¦‚è¿°

æœ¬æ–‡æ¡£è®°å½•äº†åœ¨ç”µåŠ¨è½¦ä»¿çœŸç³»ç»Ÿä¸­å®ç°Foliumåœ°å›¾åŠ¨ç”»çš„æŠ€æœ¯æ–¹æ¡ˆå’Œå®ç°ç»†èŠ‚ã€‚

## æŠ€æœ¯èƒŒæ™¯

### é—®é¢˜æè¿°
ç”¨æˆ·å¸Œæœ›åœ¨Foliumäº¤äº’å¼åœ°å›¾ä¸Šè¿è¡Œä»¿çœŸåŠ¨ç”»ï¼Œæ›¿ä»£æˆ–è¡¥å……ç°æœ‰çš„matplotlibå¯è§†åŒ–æ–¹æ¡ˆã€‚

### è§£å†³æ–¹æ¡ˆ
åˆ›å»ºç‹¬ç«‹çš„FoliumåŠ¨ç”»ç³»ç»Ÿï¼Œä¿æŒåŸæœ‰OSMnx+NetworkXè®¡ç®—æ ¸å¿ƒä¸å˜ï¼Œä½¿ç”¨Foliumçš„TimestampedGeoJsonåŠŸèƒ½å®ç°è½¦è¾†è½¨è¿¹åŠ¨ç”»ã€‚

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶
- **è®¡ç®—åç«¯**: OSMnx + NetworkXï¼ˆä¿æŒä¸å˜ï¼‰
- **å¯è§†åŒ–å‰ç«¯**: Folium + TimestampedGeoJson 
- **åŠ¨ç”»æ§åˆ¶**: Leaflet TimeDimensionæ’ä»¶
- **æ•°æ®æ ¼å¼**: GeoJSON FeatureCollection

### æ–‡ä»¶ç»“æ„
```
ui/
â”œâ”€â”€ folium_simulation.py          # æ–°å¢Foliumä»¿çœŸæ¼”ç¤º
â”œâ”€â”€ demo_ui.py                   # åŸæœ‰DearPyGuiæ¼”ç¤ºï¼ˆä¿ç•™ï¼‰
â””â”€â”€ hybrid_demo.py               # æ··åˆæ¶æ„æ¼”ç¤ºï¼ˆä¿ç•™ï¼‰
```

## å®ç°ç»†èŠ‚

### 1. è½¦è¾†åŠ¨ç”»å®ç°

ä½¿ç”¨TimestampedGeoJsonåˆ›å»ºæ—¶é—´åºåˆ—åœ°ç†æ•°æ®ï¼š

```python
# ä¸ºæ¯ä¸ªè½¦è¾†åˆ›å»ºæ—¶é—´åºåˆ—è½¨è¿¹
for vehicle_id in all_vehicle_ids:
    vehicle_path = []
    for frame in animation_data:
        # åˆ›å»ºå¸¦æ—¶é—´æˆ³çš„GeoJSONç‰¹å¾
        feature = {
            'type': 'Feature',
            'geometry': {'type': 'Point', 'coordinates': [lon, lat]},
            'properties': {
                'time': timestamp.isoformat(),
                'style': {'color': vehicle_color, 'radius': 8},
                'popup': f"Vehicle {vehicle_id}<br>Status: {status}<br>Battery: {battery}%"
            }
        }
        vehicle_path.append(feature)
```

### 2. æ—¶é—´æ§åˆ¶å™¨é…ç½®

```python
# é…ç½®æ—¶é—´ç»´åº¦æ§åˆ¶å™¨
timeDimensionControl = L.Control.TimeDimensionCustom({
    "position": "bottomleft",
    "minSpeed": 0.1,
    "maxSpeed": 10,
    "autoPlay": true,
    "loopButton": true,
    "timeSliderDragUpdate": true,
    "speedSlider": true,
    "playerOptions": {
        "transitionTime": 200,
        "loop": true,
        "startOver": true
    }
})
```

### 3. å……ç”µç«™æ˜¾ç¤º

```python
# é™æ€å……ç”µç«™æ ‡è®°
folium.Marker(
    location=[lat, lon],
    popup=f"Charging Station {station_id}<br>Power: {power}kW",
    icon=folium.Icon(color='red', icon='plug', prefix='fa')
).add_to(map)
```

## æ ¸å¿ƒä¼˜åŠ¿

### 1. é«˜è´¨é‡å¯è§†åŒ–
- åŸç”ŸWebåœ°å›¾ï¼Œæ— å›¾åƒè´¨é‡æŸå¤±
- ä¸“ä¸šçº§åœ°å›¾äº¤äº’ä½“éªŒ
- æ”¯æŒç¼©æ”¾ã€å¹³ç§»ã€å›¾å±‚æ§åˆ¶

### 2. å¼ºå¤§çš„åŠ¨ç”»åŠŸèƒ½
- æ—¶é—´è½´æ§åˆ¶å›æ”¾
- é€Ÿåº¦è°ƒèŠ‚ï¼ˆ0.1x - 10xï¼‰
- å¾ªç¯æ’­æ”¾æ”¯æŒ
- æ‹–æ‹½æ—¶é—´ç‚¹è·³è½¬

### 3. ç³»ç»Ÿå…¼å®¹æ€§
- ä¿æŒåŸæœ‰è®¡ç®—æ ¸å¿ƒä¸å˜
- ä¸ç°æœ‰matplotlibæ–¹æ¡ˆå¹¶å­˜
- ç‹¬ç«‹è¿è¡Œï¼Œäº’ä¸å¹²æ‰°

## å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ
- [x] åŸºç¡€FoliumåŠ¨ç”»æ¡†æ¶
- [x] è½¦è¾†è½¨è¿¹åŠ¨ç”»æ¼”ç¤º
- [x] å……ç”µç«™é™æ€æ ‡è®°
- [x] æ—¶é—´æ§åˆ¶å™¨é›†æˆ
- [x] å¤šè½¦è¾†å¹¶è¡ŒåŠ¨ç”»
- [x] è½¦è¾†çŠ¶æ€é¢œè‰²ç¼–ç 
- [x] å¼¹çª—ä¿¡æ¯æ˜¾ç¤º

### ğŸ”„ æ¼”ç¤ºç¨‹åºè¿è¡Œæ–¹å¼

```bash
# åˆ‡æ¢åˆ°UIç›®å½•
cd ui

# è¿è¡ŒFoliumåŠ¨ç”»æ¼”ç¤º
python folium_simulation.py

# è‡ªåŠ¨ç”Ÿæˆ simulation_animation.html å¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
```

### ğŸ“‹ æŠ€æœ¯ç‰¹æ€§

1. **è½¦è¾†åŠ¨ç”»**
   - 5è¾†æ¼”ç¤ºè½¦è¾†ï¼Œä¸åŒé¢œè‰²
   - åœ†å½¢è½¨è¿¹è·¯å¾„æ¨¡æ‹Ÿ
   - çŠ¶æ€å˜åŒ–åŠ¨ç”»ï¼ˆå¯ç”¨/è½½å®¢/å……ç”µç­‰ï¼‰
   - ç”µæ± ç”µé‡æ˜¾ç¤º

2. **åœ°å›¾åŠŸèƒ½**
   - West Lafayetteåœ°åŒºåœ°å›¾
   - 3ä¸ªå……ç”µç«™æ ‡è®°
   - ç¼©æ”¾å¹³ç§»äº¤äº’
   - å¼¹çª—è¯¦ç»†ä¿¡æ¯

3. **åŠ¨ç”»æ§åˆ¶**
   - è‡ªåŠ¨æ’­æ”¾
   - å¾ªç¯æ¨¡å¼
   - é€Ÿåº¦æ§åˆ¶æ»‘å—
   - æ—¶é—´æ‹–æ‹½è·³è½¬

## ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

### ğŸ¯ é›†æˆçœŸå®ä»¿çœŸæ•°æ®
- è¿æ¥ç°æœ‰SimulationEngine
- ä»çœŸå®è½¦è¾†è·¯å¾„ç”Ÿæˆè½¨è¿¹
- å®æ—¶è®¢å•çŠ¶æ€æ˜¾ç¤º
- å……ç”µç«™çŠ¶æ€æ›´æ–°

### ğŸ”§ åŠŸèƒ½å¢å¼º
- è®¢å•pickup/deliveryä½ç½®æ ‡è®°
- è½¦è¾†è·¯å¾„è½¨è¿¹çº¿æ˜¾ç¤º
- å®æ—¶ç»Ÿè®¡é¢æ¿
- å›¾å±‚å¼€å…³æ§åˆ¶

### ğŸ¨ ç•Œé¢ä¼˜åŒ–
- è‡ªå®šä¹‰è½¦è¾†å›¾æ ‡
- çŠ¶æ€å›¾ä¾‹è¯´æ˜
- æ€§èƒ½æŒ‡æ ‡æ˜¾ç¤º
- å“åº”å¼å¸ƒå±€

## æŠ€æœ¯ä¾èµ–

### æ–°å¢ä¾èµ–
```txt
folium>=0.20.0
seaborn>=0.12.0  # å·²æ·»åŠ åˆ°requirements.txt
```

### æ ¸å¿ƒæ’ä»¶
- Leaflet TimeDimension
- FontAwesomeå›¾æ ‡åº“
- Bootstrapæ ·å¼æ¡†æ¶

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
- `ui/folium_simulation.py` - FoliumåŠ¨ç”»æ¼”ç¤ºä¸»ç¨‹åº
- `doc/FOLIUM_ANIMATION_GUIDE.md` - æœ¬æŠ€æœ¯æŒ‡å—

### ä¿®æ”¹æ–‡ä»¶  
- `requirements.txt` - æ·»åŠ seabornä¾èµ–

### æœªä¿®æ”¹æ–‡ä»¶
- `main.py` - åŸæœ‰ä»¿çœŸä¸»ç¨‹åºï¼ˆå®Œå…¨ä¿æŒåŸæ ·ï¼‰
- `core/` - æ‰€æœ‰ä»¿çœŸå¼•æ“æ–‡ä»¶
- `models/` - æ‰€æœ‰æ•°æ®æ¨¡å‹æ–‡ä»¶
- `visualization/` - åŸæœ‰å¯è§†åŒ–æ–‡ä»¶

## é‡è¦è¯´æ˜

âš ï¸ **ç³»ç»Ÿå®‰å…¨æ€§**: åŸæœ‰ä»¿çœŸç³»ç»Ÿå®Œå…¨æœªè¢«ä¿®æ”¹ï¼Œæ–°çš„Foliumæ–¹æ¡ˆä½œä¸ºç‹¬ç«‹æ¨¡å—å­˜åœ¨ï¼Œç¡®ä¿ç°æœ‰åŠŸèƒ½ä¸å—å½±å“ã€‚

ğŸ’¡ **å¼€å‘å»ºè®®**: å»ºè®®å…ˆåœ¨æ¼”ç¤ºç¨‹åºåŸºç¡€ä¸Šé€æ­¥é›†æˆçœŸå®ä»¿çœŸæ•°æ®ï¼Œç¡®ä¿åŠ¨ç”»æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

---

**æ–‡æ¡£åˆ›å»º**: 2025-01-01  
**æœ€åæ›´æ–°**: 2025-01-01  
**æŠ€æœ¯æ ˆ**: OSMnx + NetworkX + Folium + TimestampedGeoJson 